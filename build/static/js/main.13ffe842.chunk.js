(this.webpackJsonpmessage=this.webpackJsonpmessage||[]).push([[0],{25:function(e,t,a){},46:function(e,t,a){"use strict";a.r(t);var n=a(2),r=a.n(n),s=a(19),o=a.n(s),c=(a(25),a(4)),u=a(5),i=a(7),m=a(6),h=a(0),l=function(e){return Object(h.jsx)("div",{className:"no-token",children:Object(h.jsx)("h1",{className:"main-user-message",children:"Please Log in to see and create messages!"})})},d=a(20),g=a(3),p=a.n(g),b=a(8);function j(e){var t=new Date(e.timeCreated).valueOf(),a=Date.now()-t,n=Math.floor(a/6e4);if(n<60)return"".concat(n,"m ago");var r=Math.floor(n/60);return"".concat(r,"h ago")}var f=function(e){var t=e.message;return Object(h.jsxs)("div",{className:"message",children:[Object(h.jsx)("h2",{children:t.title}),Object(h.jsx)("p",{className:"message-body",children:t.body}),Object(h.jsx)("p",{className:"message-time-remaining",children:j(t)}),Object(h.jsx)("button",{className:"message-delete",onClick:function(){e.handleDelete(t)},children:"Delete"})]})},k=a(10),F=a.n(k),O=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.props.colors;return this.props.CurrentTheme?Object(h.jsx)("div",{className:"theme-selector",children:t.map((function(t){return Object(h.jsx)("div",{onClick:function(){e.props.changeTheme(t)},style:{backgroundColor:t["--message-background"]},className:t.name===e.props.CurrentTheme.name?"color-option-selected":"color-option"},t.name)}))}):null}}]),a}(n.Component),v=[{"--message-background":"#FFFFFF","--background":"#F0F0F0","--text-color":"#000000","--shadow-color":"#000000",name:"theme1"},{"--message-background":"#BA0D41","--background":"#F21D5D","--text-color":"#FFFFFF","--shadow-color":"#0e0e0e",name:"theme2"},{"--message-background":"#F08000","--background":"#ED8A18","--text-color":"#FFFFFF","--shadow-color":"#000000",name:"theme3"},{"--message-background":"#F2C00A","--background":"#FCC80D","--text-color":"#111111","--shadow-color":"#000000",name:"theme4"},{"--message-background":"#1E60E6","--background":"#3577FC","--text-color":"#FFFFFF","--shadow-color":"#0e0e0e",name:"theme5"},{"--message-background":"#3E0EC2","--background":"#4E17E6","--text-color":"#FFFFFF","--shadow-color":"#0e0e0e",name:"theme6"},{"--message-background":"#1f1f1f","--background":"#2D2D2D","--text-color":"#E0E0E0","--shadow-color":"#000000",name:"theme7"}],x=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={messages:[],current_theme:null},e.getMessages=Object(b.a)(p.a.mark((function t(){var a,n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props.token,t.next=3,F.a.get("https://mitm-api.herokuapp.com/api/messages/recent",{headers:{user_auth_token:a}});case 3:if(!(n=t.sent).data.error){t.next=6;break}return t.abrupt("return",console.log(n.data.error));case 6:e.setState({messages:n.data});case 7:case"end":return t.stop()}}),t)}))),e.changeTheme=function(t){for(var a in t)document.documentElement.style.setProperty(a,t[a]);localStorage.setItem("CurrentTheme",JSON.stringify(t)),e.setState({current_theme:t})},e.initTheme=function(){null!=localStorage.getItem("CurrentTheme")?e.setState({current_theme:JSON.parse(localStorage.getItem("CurrentTheme"))}):e.setState({current_theme:v[0]})},e.handleDelete=function(){var t=Object(b.a)(p.a.mark((function t(a){var n,r,s,o,c,u;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a._id,r=e.props.token,t.next=4,F.a.post("https://mitm-api.herokuapp.com/api/messages/delete/"+n,{},{headers:{user_auth_token:r}});case 4:if(s=t.sent,!(o=s.data).error){t.next=8;break}return t.abrupt("return",console.log(o.error));case 8:c=Object(d.a)(e.state.messages),u=c.findIndex((function(e){return e._id===o._id})),c.splice(u,1),e.setState({messages:c});case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=Object(b.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.getMessages(),e.next=3,this.initTheme();case 3:this.changeTheme(this.state.current_theme);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return 0===this.state.messages.length?Object(h.jsx)("h1",{className:"main-user-message",children:"No messages for today!"}):Object(h.jsxs)("div",{className:"rendered-wrapper",children:[Object(h.jsx)(O,{colors:v,CurrentTheme:this.state.current_theme,changeTheme:this.changeTheme}),Object(h.jsx)("div",{className:"messages-wrapper",children:this.state.messages.map((function(t){return Object(h.jsx)(f,{message:t,handleDelete:e.handleDelete},t.title+Date.now())}))})]})}}]),a}(n.Component),w=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={token:void 0},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.setState({token:localStorage.getItem("user_auth_token")})}},{key:"render",value:function(){return this.state.token?Object(h.jsx)(x,{token:this.state.token}):Object(h.jsx)(l,{})}}]),a}(n.Component);o.a.render(Object(h.jsx)(r.a.StrictMode,{children:Object(h.jsx)(w,{})}),document.getElementById("root"))}},[[46,1,2]]]);
//# sourceMappingURL=main.13ffe842.chunk.js.map